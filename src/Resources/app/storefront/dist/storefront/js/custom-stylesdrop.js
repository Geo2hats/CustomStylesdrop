"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["custom-stylesdrop"],{8187:(e,t,r)=>{var i,n,c,a=r(6285);class s extends a.Z{init(){this._registerEvents();const e=document.querySelector("#productDesignerPrice");e&&(e.parentElement.style.display="none")}_registerEvents(){window.addEventListener("message",this._handleMessage.bind(this),!1)}_handleMessage(e){try{const{isProductDesigner:t,event:r,params:{price:i}={}}=JSON.parse(e.data)||{};t&&"finish"===r&&(this.updatePrice(i),this.updateAdvancedPricesWithDiscount(i))}catch(e){return}}updatePrice(e){const t=document.querySelector(".product-detail-price-container > .product-detail-price")||document.querySelector(".mabp-current-price > .product-detail-price > .mabp-current-price-value"),r=t.innerHTML.replace("&nbsp;"," "),i=this.extractPrice(r),n=this.formatPrice(this.options.unitPrice+e,r);t.innerHTML=r.replace(i,n)}updateAdvancedPricesWithDiscount(e){if(!this.options.advancedPrice)return;const t=document.querySelectorAll(".mabp-price-table-row"),r=t.length;for(let i=0;i<r;i++){const r=t[i],n=r.querySelector(".product-detail-price"),c=n.innerHTML.replace("&nbsp;"," "),a=parseInt(r.dataset.from),s=parseInt(r.dataset.to),o=this.options.advancedPrice.find((e=>e.extensions.maxiaAdvBlockPrices.from===a&&(e.extensions.maxiaAdvBlockPrices.to===s||null===e.extensions.maxiaAdvBlockPrices.to)));if(!o)continue;const d=o.extensions.maxiaAdvBlockPrices.savingsPercent;if(!d)continue;const u=e-e*d/100,l=o.unitPrice+u,p=this.formatPrice(l,c);n.textContent=c.replace(this.extractPrice(c),p),r.dataset.price=this.extractPrice(c)}}extractPrice(e){const t=e.split(" ");for(let e=0;e<t.length;e++){const r=t[e];if(r.match(/^\d+,\d{2}$/))return r;if(r.match(/^\d+\.\d{2}$/))return r;if(r.match(/^[^\d]+\d+\.\d{2}$/))return r.match(/\d+\.\d{2}$/)[0]}return"0.00"}getDecimalSeparator(e){return e.match(/\.|,/)[0]}formatPrice(e,t){const r=this.getDecimalSeparator(t);return e.toFixed(2).replace(".",r)}}i=s,c={advancedPrice:null,unitPrice:null},(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n="options"))in i?Object.defineProperty(i,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):i[n]=c,window.PluginManager.register("CustomStylesdrop",s,"[data-custom-plugin]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=8187,e(e.s=t);var t}));e.O()}]);